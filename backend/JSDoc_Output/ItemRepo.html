<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Class: ItemRepo</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Class: ItemRepo</h1>

    




<section>

<header>
    
        <h2><span class="attribs"><span class="type-signature"></span></span>ItemRepo<span class="signature">(postgres)</span><span class="type-signature"> &rarr; {<a href="ItemRepo.html">ItemRepo</a>}</span></h2>
        
    
</header>

<article>
    <div class="container-overview">
    
        

    

    
    <h4 class="name" id="ItemRepo"><span class="type-signature"></span>new ItemRepo<span class="signature">(postgres)</span><span class="type-signature"> &rarr; {<a href="ItemRepo.html">ItemRepo</a>}</span></h4>
    

    



<div class="description">
    Wrapper around postgres data functions for the Item Model. 
Requires a postgres connection and ability to make valid postgres queries.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>postgres</code></td>
            

            <td class="type">
            
                
<span class="param-type"><a href="global.html#PostgresDB">PostgresDB</a></span>


            
            </td>

            

            

            <td class="description last">Database instance</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="models_item_postgres.js.html">models/item/postgres.js</a>, <a href="models_item_postgres.js.html#line9">line 9</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    - ItemRepo Object
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type"><a href="ItemRepo.html">ItemRepo</a></span>


    </dd>
</dl>

    





    
    </div>

    

    

    

    

    

    

    
        <h3 class="subsection-title">Members</h3>

        
            
<h4 class="name" id="~createBidSQL"><span class="type-signature">(inner, constant) </span>createBidSQL<span class="type-signature"> :string</span></h4>




<div class="description">
    Creates a new bid item
</div>



    <h5>Type:</h5>
    <ul>
        <li>
            
<span class="param-type">string</span>


        </li>
    </ul>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="models_item_postgres.js.html">models/item/postgres.js</a>, <a href="models_item_postgres.js.html#line284">line 284</a>
    </li></ul></dd>
    

    

    

    
</dl>






        
            
<h4 class="name" id="~createBidTableSQL"><span class="type-signature">(inner, constant) </span>createBidTableSQL<span class="type-signature"> :string</span></h4>




<div class="description">
    Set up the bid table if it does not exist
</div>



    <h5>Type:</h5>
    <ul>
        <li>
            
<span class="param-type">string</span>


        </li>
    </ul>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="models_item_postgres.js.html">models/item/postgres.js</a>, <a href="models_item_postgres.js.html#line37">line 37</a>
    </li></ul></dd>
    

    

    

    
</dl>






        
            
<h4 class="name" id="~createItemSQL"><span class="type-signature">(inner, constant) </span>createItemSQL<span class="type-signature"> :string</span></h4>




<div class="description">
    Inserts an item entry into the items tabl
</div>



    <h5>Type:</h5>
    <ul>
        <li>
            
<span class="param-type">string</span>


        </li>
    </ul>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="models_item_postgres.js.html">models/item/postgres.js</a>, <a href="models_item_postgres.js.html#line98">line 98</a>
    </li></ul></dd>
    

    

    

    
</dl>






        
            
<h4 class="name" id="~createItemTableSQL"><span class="type-signature">(inner, constant) </span>createItemTableSQL<span class="type-signature"> :string</span></h4>




<div class="description">
    Set up the item table if it does not exist
</div>



    <h5>Type:</h5>
    <ul>
        <li>
            
<span class="param-type">string</span>


        </li>
    </ul>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="models_item_postgres.js.html">models/item/postgres.js</a>, <a href="models_item_postgres.js.html#line16">line 16</a>
    </li></ul></dd>
    

    

    

    
</dl>






        
            
<h4 class="name" id="~createShipmentSQL"><span class="type-signature">(inner, constant) </span>createShipmentSQL<span class="type-signature"> :string</span></h4>




<div class="description">
    Inserts an item entry into the items tabl
</div>



    <h5>Type:</h5>
    <ul>
        <li>
            
<span class="param-type">string</span>


        </li>
    </ul>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="models_item_postgres.js.html">models/item/postgres.js</a>, <a href="models_item_postgres.js.html#line421">line 421</a>
    </li></ul></dd>
    

    

    

    
</dl>






        
            
<h4 class="name" id="~createShipmentTableSQL"><span class="type-signature">(inner, constant) </span>createShipmentTableSQL<span class="type-signature"> :string</span></h4>




<div class="description">
    Set up the shipment table if it does not exist
</div>



    <h5>Type:</h5>
    <ul>
        <li>
            
<span class="param-type">string</span>


        </li>
    </ul>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="models_item_postgres.js.html">models/item/postgres.js</a>, <a href="models_item_postgres.js.html#line57">line 57</a>
    </li></ul></dd>
    

    

    

    
</dl>






        
            
<h4 class="name" id="~getBidsForItemSQL"><span class="type-signature">(inner, constant) </span>getBidsForItemSQL<span class="type-signature"> :string</span></h4>




<div class="description">
    Gets all bids for a specified item id
</div>



    <h5>Type:</h5>
    <ul>
        <li>
            
<span class="param-type">string</span>


        </li>
    </ul>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="models_item_postgres.js.html">models/item/postgres.js</a>, <a href="models_item_postgres.js.html#line170">line 170</a>
    </li></ul></dd>
    

    

    

    
</dl>






        
            
<h4 class="name" id="~getBidsForUserSQL"><span class="type-signature">(inner, constant) </span>getBidsForUserSQL<span class="type-signature"> :string</span></h4>




<div class="description">
    Gets list of bids by user_id
Includes aggregated fields total_cost and tickets_bought
</div>



    <h5>Type:</h5>
    <ul>
        <li>
            
<span class="param-type">string</span>


        </li>
    </ul>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="models_item_postgres.js.html">models/item/postgres.js</a>, <a href="models_item_postgres.js.html#line387">line 387</a>
    </li></ul></dd>
    

    

    

    
</dl>






        
            
<h4 class="name" id="~getItemFeedSQL"><span class="type-signature">(inner, constant) </span>getItemFeedSQL<span class="type-signature"> :string</span></h4>




<div class="description">
    SQL to get a feed of items where the raffle is in progress
</div>



    <h5>Type:</h5>
    <ul>
        <li>
            
<span class="param-type">string</span>


        </li>
    </ul>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="models_item_postgres.js.html">models/item/postgres.js</a>, <a href="models_item_postgres.js.html#line482">line 482</a>
    </li></ul></dd>
    

    

    

    
</dl>






        
            
<h4 class="name" id="~getItemInfoSQL"><span class="type-signature">(inner, constant) </span>getItemInfoSQL<span class="type-signature"> :string</span></h4>




<div class="description">
    Retrieve the item id where the id is given and the user is the seller.
Aggregates the total tickets sold value into the returned info for ease of displaying this info to users
</div>



    <h5>Type:</h5>
    <ul>
        <li>
            
<span class="param-type">string</span>


        </li>
    </ul>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="models_item_postgres.js.html">models/item/postgres.js</a>, <a href="models_item_postgres.js.html#line137">line 137</a>
    </li></ul></dd>
    

    

    

    
</dl>






        
            
<h4 class="name" id="~getItemsForSellerSQL"><span class="type-signature">(inner, constant) </span>getItemsForSellerSQL<span class="type-signature"> :string</span></h4>




<div class="description">
    Gets list of items by seller_id
Includes aggregated fields current_ledger and tickets_sold
</div>



    <h5>Type:</h5>
    <ul>
        <li>
            
<span class="param-type">string</span>


        </li>
    </ul>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="models_item_postgres.js.html">models/item/postgres.js</a>, <a href="models_item_postgres.js.html#line353">line 353</a>
    </li></ul></dd>
    

    

    

    
</dl>






        
            
<h4 class="name" id="~getItemsPastDeadlineSQL"><span class="type-signature">(inner, constant) </span>getItemsPastDeadlineSQL<span class="type-signature"> :string</span></h4>




<div class="description">
    SQL to get items past deadline
</div>



    <h5>Type:</h5>
    <ul>
        <li>
            
<span class="param-type">string</span>


        </li>
    </ul>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="models_item_postgres.js.html">models/item/postgres.js</a>, <a href="models_item_postgres.js.html#line509">line 509</a>
    </li></ul></dd>
    

    

    

    
</dl>






        
            
<h4 class="name" id="~getItemsWithStatusSQL"><span class="type-signature">(inner, constant) </span>getItemsWithStatusSQL<span class="type-signature"> :string</span></h4>




<div class="description">
    Gets all items with a given status
Includes current-ledger and tickets_sold as this will be used for displaying items
</div>



    <h5>Type:</h5>
    <ul>
        <li>
            
<span class="param-type">string</span>


        </li>
    </ul>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="models_item_postgres.js.html">models/item/postgres.js</a>, <a href="models_item_postgres.js.html#line223">line 223</a>
    </li></ul></dd>
    

    

    

    
</dl>






        
            
<h4 class="name" id="~getShipmentInformationSQL"><span class="type-signature">(inner, constant) </span>getShipmentInformationSQL<span class="type-signature"> :string</span></h4>




<div class="description">
    Gets the shipment with the tracking number given
</div>



    <h5>Type:</h5>
    <ul>
        <li>
            
<span class="param-type">string</span>


        </li>
    </ul>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="models_item_postgres.js.html">models/item/postgres.js</a>, <a href="models_item_postgres.js.html#line455">line 455</a>
    </li></ul></dd>
    

    

    

    
</dl>






        
            
<h4 class="name" id="~setBidAsWinnerSQL"><span class="type-signature">(inner, constant) </span>setBidAsWinnerSQL<span class="type-signature"> :string</span></h4>




<div class="description">
    Sets a bid with a given bid_id as the winning bid
</div>



    <h5>Type:</h5>
    <ul>
        <li>
            
<span class="param-type">string</span>


        </li>
    </ul>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="models_item_postgres.js.html">models/item/postgres.js</a>, <a href="models_item_postgres.js.html#line196">line 196</a>
    </li></ul></dd>
    

    

    

    
</dl>






        
            
<h4 class="name" id="~updateItemStatusSQL"><span class="type-signature">(inner, constant) </span>updateItemStatusSQL<span class="type-signature"> :string</span></h4>




<div class="description">
    Updates the status of an item
</div>



    <h5>Type:</h5>
    <ul>
        <li>
            
<span class="param-type">string</span>


        </li>
    </ul>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="models_item_postgres.js.html">models/item/postgres.js</a>, <a href="models_item_postgres.js.html#line257">line 257</a>
    </li></ul></dd>
    

    

    

    
</dl>






        
    

    
        <h3 class="subsection-title">Methods</h3>

        
            

    

    
    <h4 class="name" id="~createBid"><span class="type-signature">(async, inner) </span>createBid<span class="signature">(user_id, item_id, ticket_count, total_cost, random_seed)</span><span class="type-signature"> &rarr; {Array.&lt;{0: Bid, 1: String}>}</span></h4>
    

    



<div class="description">
    Use createBidSQL to create a new bid, tying together a user and item they have bid on
THIS METHOD IS ATOMIC
Steps to take
1. Get tickets sold count for item
2. Ensure it is possible to make the transaction
3. Create the bid
4. If this used up all the tickets, set the item status to "AR" ("Awaiting Raffle")
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>user_id</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            

            

            <td class="description last">ID of user buying the bid</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>item_id</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            

            

            <td class="description last">ID of the item being bid on</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>ticket_count</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            

            

            <td class="description last">Amount of tickets user wants to buy</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>total_cost</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            

            

            <td class="description last">Total cost of tickets that are being bought</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>random_seed</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            

            

            <td class="description last">Random seed value for this bid given by the frontend</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="models_item_postgres.js.html">models/item/postgres.js</a>, <a href="models_item_postgres.js.html#line306">line 306</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    - Array with Rafflebay Bid Object and error (only one or the other)
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Array.&lt;{0: Bid, 1: String}></span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="~createItem"><span class="type-signature">(async, inner) </span>createItem<span class="signature">(item_name, seller_id, pic_url, item_description, tags, sale_price, ticket_price, total_tickets, deadline, status)</span><span class="type-signature"> &rarr; {Array.&lt;{0: Item, 1: String}>}</span></h4>
    

    



<div class="description">
    Uses createItemSQL and inserts an item into the items column. 
If we get an error, then we return the (null, error), otherwise return (data, null)
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>item_name</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">Name of item</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>seller_id</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            

            

            <td class="description last">ID of user who posted item</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>pic_url</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">String of url for item picture</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>item_description</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">Description for item</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>tags</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">List of tags to describe the item</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>sale_price</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            

            

            <td class="description last">Price of the item</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>ticket_price</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            

            

            <td class="description last">Price of the tickets for the item</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>total_tickets</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            

            

            <td class="description last">Amount of tickets being sold</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>deadline</code></td>
            

            <td class="type">
            
                
<span class="param-type">datetime</span>


            
            </td>

            

            

            <td class="description last">Time until raffle closes</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>status</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">Status of the raffle</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="models_item_postgres.js.html">models/item/postgres.js</a>, <a href="models_item_postgres.js.html#line119">line 119</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    - Array with Rafflebay Item Object and error (only one or the other)
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Array.&lt;{0: Item, 1: String}></span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="~createShipment"><span class="type-signature">(async, inner) </span>createShipment<span class="signature">(item_id, winner_id, seller_id, label, tracking_number, price)</span><span class="type-signature"> &rarr; {Array.&lt;{0: Shipment, 1: String}>}</span></h4>
    

    



<div class="description">
    Uses createShipmentSQL and inserts a shipment into the shipments column. 
If we get an error, then we return the (null, error), otherwise return (data, null)
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>item_id</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            

            

            <td class="description last">ID of item</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>winner_id</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            

            

            <td class="description last">ID of user who won item</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>seller_id</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            

            

            <td class="description last">ID of user who sold item</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>label</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">URL of shipping label</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>tracking_number</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">String of tracking number</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>price</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            

            

            <td class="description last">Price of the shipment to deduct from seller</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="models_item_postgres.js.html">models/item/postgres.js</a>, <a href="models_item_postgres.js.html#line438">line 438</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    - Array with Rafflebay Shipment Object and error (only one or the other)
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Array.&lt;{0: Shipment, 1: String}></span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="~getBidsForItem"><span class="type-signature">(async, inner) </span>getBidsForItem<span class="signature">(item_id)</span><span class="type-signature"> &rarr; {Array.&lt;{0: Array.&lt;Bid>, 1: String}>}</span></h4>
    

    



<div class="description">
    Given an item id, get all bids
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>item_id</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            

            

            <td class="description last">ID of item to get bids for</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="models_item_postgres.js.html">models/item/postgres.js</a>, <a href="models_item_postgres.js.html#line179">line 179</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    - Array with array of Rafflebay Bid Objects and error (only one or the other)
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Array.&lt;{0: Array.&lt;Bid>, 1: String}></span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="~getBidsForUser"><span class="type-signature">(async, inner) </span>getBidsForUser<span class="signature">(user_id)</span><span class="type-signature"> &rarr; {Array.&lt;{0: Array.&lt;Bid>, 1: String}>}</span></h4>
    

    



<div class="description">
    Gets all bids for user with user_id
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>user_id</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            

            

            <td class="description last">ID of user who bought the bids</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="models_item_postgres.js.html">models/item/postgres.js</a>, <a href="models_item_postgres.js.html#line403">line 403</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    - Array with array of Rafflebay Bid Objects and error (only one or the other)
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Array.&lt;{0: Array.&lt;Bid>, 1: String}></span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="~getItemFeed"><span class="type-signature">(async, inner) </span>getItemFeed<span class="signature">()</span><span class="type-signature"> &rarr; {Array.&lt;{0: Array.&lt;Item>, 1: String}>}</span></h4>
    

    



<div class="description">
    Gets a feed of all in progress objects
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="models_item_postgres.js.html">models/item/postgres.js</a>, <a href="models_item_postgres.js.html#line493">line 493</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    - Array with array of Rafflebay Item Objects and error (only one or the other)
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Array.&lt;{0: Array.&lt;Item>, 1: String}></span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="~getItemInfo"><span class="type-signature">(async, inner) </span>getItemInfo<span class="signature">(item_id)</span><span class="type-signature"> &rarr; {Array.&lt;{0: Item, 1: String}>}</span></h4>
    

    



<div class="description">
    Uses getItemInfoSQL to retrieve the item, and return either (item, null), or (null, error)
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>item_id</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            

            

            <td class="description last">ID of item to get info of</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="models_item_postgres.js.html">models/item/postgres.js</a>, <a href="models_item_postgres.js.html#line153">line 153</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    - Array with Rafflebay Item Object and error (only one or the other)
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Array.&lt;{0: Item, 1: String}></span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="~getItemsForSeller"><span class="type-signature">(async, inner) </span>getItemsForSeller<span class="signature">(seller_id)</span><span class="type-signature"> &rarr; {Array.&lt;{0: Array.&lt;Item>, 1: String}>}</span></h4>
    

    



<div class="description">
    Gets all items that are sold by the user with seller_id
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>seller_id</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            

            

            <td class="description last">ID of user who put up the item</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="models_item_postgres.js.html">models/item/postgres.js</a>, <a href="models_item_postgres.js.html#line369">line 369</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    - Array with array of Rafflebay Item Objects and error (only one or the other)
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Array.&lt;{0: Array.&lt;Item>, 1: String}></span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="~getItemsPastDeadline"><span class="type-signature">(async, inner) </span>getItemsPastDeadline<span class="signature">()</span><span class="type-signature"> &rarr; {Array.&lt;{0: Array.&lt;Item>, 1: String}>}</span></h4>
    

    



<div class="description">
    Gets all the items that have a deadline in the past and are in 'IP' or 'AR'
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="models_item_postgres.js.html">models/item/postgres.js</a>, <a href="models_item_postgres.js.html#line519">line 519</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    - Array with array of Rafflebay Item Objects and error (only one or the other)
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Array.&lt;{0: Array.&lt;Item>, 1: String}></span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="~getItemsWithStatus"><span class="type-signature">(async, inner) </span>getItemsWithStatus<span class="signature">(status)</span><span class="type-signature"> &rarr; {Array.&lt;{0: Array.&lt;Item>, 1: String}>}</span></h4>
    

    



<div class="description">
    Returns all items with a given status.
Includes aggregated fields current_ledger and tickets_sold
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>status</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">Status of items to look for</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="models_item_postgres.js.html">models/item/postgres.js</a>, <a href="models_item_postgres.js.html#line240">line 240</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    - Array with array of Rafflebay Item Objects and error (only one or the other)
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Array.&lt;{0: Array.&lt;Item>, 1: String}></span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="~getShipmentInformation"><span class="type-signature">(async, inner) </span>getShipmentInformation<span class="signature">(tracking_number)</span><span class="type-signature"> &rarr; {Array.&lt;{0: Shipment, 1: String}>}</span></h4>
    

    



<div class="description">
    Uses getShipmentInformationSQL and gets the shipment that has the tracking number
If we get an error, then we return the (null, error), otherwise return (data, null)
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>tracking_number</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">String of tracking number</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="models_item_postgres.js.html">models/item/postgres.js</a>, <a href="models_item_postgres.js.html#line466">line 466</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    - Array with Rafflebay Shipment Object and error (only one or the other)
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Array.&lt;{0: Shipment, 1: String}></span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="~setBidAsWinner"><span class="type-signature">(async, inner) </span>setBidAsWinner<span class="signature">(bid_id)</span><span class="type-signature"> &rarr; {Array.&lt;{0: Bid, 1: String}>}</span></h4>
    

    



<div class="description">
    Given a bid ID, set it as a winner
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>bid_id</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            

            

            <td class="description last">ID of bid to update</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="models_item_postgres.js.html">models/item/postgres.js</a>, <a href="models_item_postgres.js.html#line205">line 205</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    - Array with Rafflebay Bid Object and error (only one or the other)
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Array.&lt;{0: Bid, 1: String}></span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="~setupRepo"><span class="type-signature">(async, inner) </span>setupRepo<span class="signature">()</span><span class="type-signature"> &rarr; {string}</span></h4>
    

    



<div class="description">
    Uses createItemTableSQL and createBidTableSQL to create the tables, and logs the error.
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="models_item_postgres.js.html">models/item/postgres.js</a>, <a href="models_item_postgres.js.html#line77">line 77</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    - Return Null if the tables are created, and an error otherwise
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">string</span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="~updateItemStatus"><span class="type-signature">(async, inner) </span>updateItemStatus<span class="signature">(id, status)</span><span class="type-signature"> &rarr; {Array.&lt;{0: Item, 1: String}>}</span></h4>
    

    



<div class="description">
    Sets the item with the given id to the given status
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>id</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            

            

            <td class="description last">ID of item to update</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>status</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">Status to update item to</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="models_item_postgres.js.html">models/item/postgres.js</a>, <a href="models_item_postgres.js.html#line267">line 267</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    - Array with Rafflebay Item Object and error (only one or the other)
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Array.&lt;{0: Item, 1: String}></span>


    </dd>
</dl>

    





        
    

    

    
</article>

</section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="AuthService.html">AuthService</a></li><li><a href="ItemModel.html">ItemModel</a></li><li><a href="ItemRepo.html">ItemRepo</a></li><li><a href="RaffleService.html">RaffleService</a></li><li><a href="UserModel.html">UserModel</a></li><li><a href="UserRepo.html">UserRepo</a></li></ul><h3>Global</h3><ul><li><a href="global.html#PostgresDB">PostgresDB</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.3</a> on Sun Mar 08 2020 23:14:17 GMT+0000 (UTC)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>