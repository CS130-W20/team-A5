<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Class: ItemRepo</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Class: ItemRepo</h1>

    




<section>

<header>
    
        <h2><span class="attribs"><span class="type-signature"></span></span>ItemRepo<span class="signature">(postgres)</span><span class="type-signature"> &rarr; {<a href="ItemRepo.html">ItemRepo</a>}</span></h2>
        
    
</header>

<article>
    <div class="container-overview">
    
        

    

    
    <h4 class="name" id="ItemRepo"><span class="type-signature"></span>new ItemRepo<span class="signature">(postgres)</span><span class="type-signature"> &rarr; {<a href="ItemRepo.html">ItemRepo</a>}</span></h4>
    

    



<div class="description">
    Wrapper around postgres data functions for the Item Model. 
Requires a postgres connection and ability to make valid postgres queries.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>postgres</code></td>
            

            <td class="type">
            
                
<span class="param-type"><a href="global.html#PostgresDB">PostgresDB</a></span>


            
            </td>

            

            

            <td class="description last">Database instance</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="models_item_postgres.js.html">models/item/postgres.js</a>, <a href="models_item_postgres.js.html#line9">line 9</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    - ItemRepo Object
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type"><a href="ItemRepo.html">ItemRepo</a></span>


    </dd>
</dl>

    





    
    </div>

    

    

    

    

    

    

    
        <h3 class="subsection-title">Members</h3>

        
            
<h4 class="name" id="~createBidSQL"><span class="type-signature">(inner, constant) </span>createBidSQL<span class="type-signature"> :string</span></h4>




<div class="description">
    Creates a new bid item
</div>



    <h5>Type:</h5>
    <ul>
        <li>
            
<span class="param-type">string</span>


        </li>
    </ul>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="models_item_postgres.js.html">models/item/postgres.js</a>, <a href="models_item_postgres.js.html#line278">line 278</a>
    </li></ul></dd>
    

    

    

    
</dl>






        
            
<h4 class="name" id="~createBidTableSQL"><span class="type-signature">(inner, constant) </span>createBidTableSQL<span class="type-signature"> :string</span></h4>




<div class="description">
    Set up the bid table if it does not exist
</div>



    <h5>Type:</h5>
    <ul>
        <li>
            
<span class="param-type">string</span>


        </li>
    </ul>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="models_item_postgres.js.html">models/item/postgres.js</a>, <a href="models_item_postgres.js.html#line37">line 37</a>
    </li></ul></dd>
    

    

    

    
</dl>






        
            
<h4 class="name" id="~createItemSQL"><span class="type-signature">(inner, constant) </span>createItemSQL<span class="type-signature"> :string</span></h4>




<div class="description">
    Inserts an item entry into the items tabl
</div>



    <h5>Type:</h5>
    <ul>
        <li>
            
<span class="param-type">string</span>


        </li>
    </ul>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="models_item_postgres.js.html">models/item/postgres.js</a>, <a href="models_item_postgres.js.html#line92">line 92</a>
    </li></ul></dd>
    

    

    

    
</dl>






        
            
<h4 class="name" id="~createItemTableSQL"><span class="type-signature">(inner, constant) </span>createItemTableSQL<span class="type-signature"> :string</span></h4>




<div class="description">
    Set up the item table if it does not exist
</div>



    <h5>Type:</h5>
    <ul>
        <li>
            
<span class="param-type">string</span>


        </li>
    </ul>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="models_item_postgres.js.html">models/item/postgres.js</a>, <a href="models_item_postgres.js.html#line16">line 16</a>
    </li></ul></dd>
    

    

    

    
</dl>






        
            
<h4 class="name" id="~createShipmentSQL"><span class="type-signature">(inner, constant) </span>createShipmentSQL<span class="type-signature"> :string</span></h4>




<div class="description">
    Inserts an item entry into the items tabl
</div>



    <h5>Type:</h5>
    <ul>
        <li>
            
<span class="param-type">string</span>


        </li>
    </ul>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="models_item_postgres.js.html">models/item/postgres.js</a>, <a href="models_item_postgres.js.html#line414">line 414</a>
    </li></ul></dd>
    

    

    

    
</dl>






        
            
<h4 class="name" id="~createShipmentTableSQL"><span class="type-signature">(inner, constant) </span>createShipmentTableSQL<span class="type-signature"> :string</span></h4>




<div class="description">
    Set up the shipment table if it does not exist
</div>



    <h5>Type:</h5>
    <ul>
        <li>
            
<span class="param-type">string</span>


        </li>
    </ul>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="models_item_postgres.js.html">models/item/postgres.js</a>, <a href="models_item_postgres.js.html#line56">line 56</a>
    </li></ul></dd>
    

    

    

    
</dl>






        
            
<h4 class="name" id="~getBidsForItemSQL"><span class="type-signature">(inner, constant) </span>getBidsForItemSQL<span class="type-signature"> :string</span></h4>




<div class="description">
    Gets all bids for a specified item id
</div>



    <h5>Type:</h5>
    <ul>
        <li>
            
<span class="param-type">string</span>


        </li>
    </ul>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="models_item_postgres.js.html">models/item/postgres.js</a>, <a href="models_item_postgres.js.html#line164">line 164</a>
    </li></ul></dd>
    

    

    

    
</dl>






        
            
<h4 class="name" id="~getBidsForUserSQL"><span class="type-signature">(inner, constant) </span>getBidsForUserSQL<span class="type-signature"> :string</span></h4>




<div class="description">
    Gets list of bids by user_id
Includes aggregated fields total_cost and tickets_bought
</div>



    <h5>Type:</h5>
    <ul>
        <li>
            
<span class="param-type">string</span>


        </li>
    </ul>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="models_item_postgres.js.html">models/item/postgres.js</a>, <a href="models_item_postgres.js.html#line380">line 380</a>
    </li></ul></dd>
    

    

    

    
</dl>






        
            
<h4 class="name" id="~getItemInfoSQL"><span class="type-signature">(inner, constant) </span>getItemInfoSQL<span class="type-signature"> :string</span></h4>




<div class="description">
    Retrieve the item id where the id is given and the user is the seller.
Aggregates the total tickets sold value into the returned info for ease of displaying this info to users
</div>



    <h5>Type:</h5>
    <ul>
        <li>
            
<span class="param-type">string</span>


        </li>
    </ul>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="models_item_postgres.js.html">models/item/postgres.js</a>, <a href="models_item_postgres.js.html#line131">line 131</a>
    </li></ul></dd>
    

    

    

    
</dl>






        
            
<h4 class="name" id="~getItemsForSellerSQL"><span class="type-signature">(inner, constant) </span>getItemsForSellerSQL<span class="type-signature"> :string</span></h4>




<div class="description">
    Gets list of items by seller_id
Includes aggregated fields current_ledger and tickets_sold
</div>



    <h5>Type:</h5>
    <ul>
        <li>
            
<span class="param-type">string</span>


        </li>
    </ul>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="models_item_postgres.js.html">models/item/postgres.js</a>, <a href="models_item_postgres.js.html#line346">line 346</a>
    </li></ul></dd>
    

    

    

    
</dl>






        
            
<h4 class="name" id="~getItemsWithStatusSQL"><span class="type-signature">(inner, constant) </span>getItemsWithStatusSQL<span class="type-signature"> :string</span></h4>




<div class="description">
    Gets all items with a given status
Includes current-ledger and tickets_sold as this will be used for displaying items
</div>



    <h5>Type:</h5>
    <ul>
        <li>
            
<span class="param-type">string</span>


        </li>
    </ul>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="models_item_postgres.js.html">models/item/postgres.js</a>, <a href="models_item_postgres.js.html#line217">line 217</a>
    </li></ul></dd>
    

    

    

    
</dl>






        
            
<h4 class="name" id="~setBidAsWinnerSQL"><span class="type-signature">(inner, constant) </span>setBidAsWinnerSQL<span class="type-signature"> :string</span></h4>




<div class="description">
    Sets a bid with a given bid_id as the winning bid
</div>



    <h5>Type:</h5>
    <ul>
        <li>
            
<span class="param-type">string</span>


        </li>
    </ul>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="models_item_postgres.js.html">models/item/postgres.js</a>, <a href="models_item_postgres.js.html#line190">line 190</a>
    </li></ul></dd>
    

    

    

    
</dl>






        
            
<h4 class="name" id="~updateItemStatusSQL"><span class="type-signature">(inner, constant) </span>updateItemStatusSQL<span class="type-signature"> :string</span></h4>




<div class="description">
    Updates the status of an item
</div>



    <h5>Type:</h5>
    <ul>
        <li>
            
<span class="param-type">string</span>


        </li>
    </ul>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="models_item_postgres.js.html">models/item/postgres.js</a>, <a href="models_item_postgres.js.html#line251">line 251</a>
    </li></ul></dd>
    

    

    

    
</dl>






        
    

    
        <h3 class="subsection-title">Methods</h3>

        
            

    

    
    <h4 class="name" id="~createBid"><span class="type-signature">(async, inner) </span>createBid<span class="signature">(user_id, item_id, ticket_count, total_cost)</span><span class="type-signature"> &rarr; {Array.&lt;{0: Bid, 1: String}>}</span></h4>
    

    



<div class="description">
    Use createBidSQL to create a new bid, tying together a user and item they have bid on
THIS METHOD IS ATOMIC
Steps to take
1. Get tickets sold count for item
2. Ensure it is possible to make the transaction
3. Create the bid
4. If this used up all the tickets, set the item status to "AR" ("Awaiting Raffle")
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>user_id</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            

            

            <td class="description last">ID of user buying the bid</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>item_id</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            

            

            <td class="description last">ID of the item being bid on</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>ticket_count</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            

            

            <td class="description last">Amount of tickets user wants to buy</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>total_cost</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            

            

            <td class="description last">Total cost of tickets that are being bought</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="models_item_postgres.js.html">models/item/postgres.js</a>, <a href="models_item_postgres.js.html#line299">line 299</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    - Array with Rafflebay Bid Object and error (only one or the other)
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Array.&lt;{0: Bid, 1: String}></span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="~createItem"><span class="type-signature">(async, inner) </span>createItem<span class="signature">(item_name, seller_id, pic_url, item_description, tags, sale_price, ticket_price, total_tickets, deadline, status)</span><span class="type-signature"> &rarr; {Array.&lt;{0: Item, 1: String}>}</span></h4>
    

    



<div class="description">
    Uses createItemSQL and inserts an item into the items column. 
If we get an error, then we return the (null, error), otherwise return (data, null)
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>item_name</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">Name of item</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>seller_id</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            

            

            <td class="description last">ID of user who posted item</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>pic_url</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">String of url for item picture</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>item_description</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">Description for item</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>tags</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">List of tags to describe the item</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>sale_price</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            

            

            <td class="description last">Price of the item</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>ticket_price</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            

            

            <td class="description last">Price of the tickets for the item</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>total_tickets</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            

            

            <td class="description last">Amount of tickets being sold</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>deadline</code></td>
            

            <td class="type">
            
                
<span class="param-type">datetime</span>


            
            </td>

            

            

            <td class="description last">Time until raffle closes</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>status</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">Status of the raffle</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="models_item_postgres.js.html">models/item/postgres.js</a>, <a href="models_item_postgres.js.html#line113">line 113</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    - Array with Rafflebay Item Object and error (only one or the other)
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Array.&lt;{0: Item, 1: String}></span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="~createShipment"><span class="type-signature">(async, inner) </span>createShipment<span class="signature">(item_id, label, tracking_number)</span><span class="type-signature"> &rarr; {Array.&lt;{0: Shipment, 1: String}>}</span></h4>
    

    



<div class="description">
    Uses createShipmentSQL and inserts a shipment into the shipments column. 
If we get an error, then we return the (null, error), otherwise return (data, null)
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>item_id</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            

            

            <td class="description last">ID of item</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>label</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">URL of shipping label</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>tracking_number</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">String of tracking number</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="models_item_postgres.js.html">models/item/postgres.js</a>, <a href="models_item_postgres.js.html#line428">line 428</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    - Array with Rafflebay Shipment Object and error (only one or the other)
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Array.&lt;{0: Shipment, 1: String}></span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="~getBidsForItem"><span class="type-signature">(async, inner) </span>getBidsForItem<span class="signature">(item_id)</span><span class="type-signature"> &rarr; {Array.&lt;{0: Array.&lt;Bid>, 1: String}>}</span></h4>
    

    



<div class="description">
    Given an item id, get all bids
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>item_id</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            

            

            <td class="description last">ID of item to get bids for</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="models_item_postgres.js.html">models/item/postgres.js</a>, <a href="models_item_postgres.js.html#line173">line 173</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    - Array with array of Rafflebay Bid Objects and error (only one or the other)
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Array.&lt;{0: Array.&lt;Bid>, 1: String}></span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="~getBidsForUser"><span class="type-signature">(async, inner) </span>getBidsForUser<span class="signature">(user_id)</span><span class="type-signature"> &rarr; {Array.&lt;{0: Array.&lt;Bid>, 1: String}>}</span></h4>
    

    



<div class="description">
    Gets all bids for user with user_id
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>user_id</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            

            

            <td class="description last">ID of user who bought the bids</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="models_item_postgres.js.html">models/item/postgres.js</a>, <a href="models_item_postgres.js.html#line396">line 396</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    - Array with array of Rafflebay Bid Objects and error (only one or the other)
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Array.&lt;{0: Array.&lt;Bid>, 1: String}></span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="~getItemInfo"><span class="type-signature">(async, inner) </span>getItemInfo<span class="signature">(item_id)</span><span class="type-signature"> &rarr; {Array.&lt;{0: Item, 1: String}>}</span></h4>
    

    



<div class="description">
    Uses getItemInfoSQL to retrieve the item, and return either (item, null), or (null, error)
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>item_id</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            

            

            <td class="description last">ID of item to get info of</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="models_item_postgres.js.html">models/item/postgres.js</a>, <a href="models_item_postgres.js.html#line147">line 147</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    - Array with Rafflebay Item Object and error (only one or the other)
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Array.&lt;{0: Item, 1: String}></span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="~getItemsForSeller"><span class="type-signature">(async, inner) </span>getItemsForSeller<span class="signature">(seller_id)</span><span class="type-signature"> &rarr; {Array.&lt;{0: Array.&lt;Item>, 1: String}>}</span></h4>
    

    



<div class="description">
    Gets all items that are sold by the user with seller_id
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>seller_id</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            

            

            <td class="description last">ID of user who put up the item</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="models_item_postgres.js.html">models/item/postgres.js</a>, <a href="models_item_postgres.js.html#line362">line 362</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    - Array with array of Rafflebay Item Objects and error (only one or the other)
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Array.&lt;{0: Array.&lt;Item>, 1: String}></span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="~getItemsWithStatus"><span class="type-signature">(async, inner) </span>getItemsWithStatus<span class="signature">(status)</span><span class="type-signature"> &rarr; {Array.&lt;{0: Array.&lt;Item>, 1: String}>}</span></h4>
    

    



<div class="description">
    Returns all items with a given status.
Includes aggregated fields current_ledger and tickets_sold
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>status</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">Status of items to look for</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="models_item_postgres.js.html">models/item/postgres.js</a>, <a href="models_item_postgres.js.html#line234">line 234</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    - Array with array of Rafflebay Item Objects and error (only one or the other)
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Array.&lt;{0: Array.&lt;Item>, 1: String}></span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="~setBidAsWinner"><span class="type-signature">(async, inner) </span>setBidAsWinner<span class="signature">(bid_id)</span><span class="type-signature"> &rarr; {Array.&lt;{0: Bid, 1: String}>}</span></h4>
    

    



<div class="description">
    Given a bid ID, set it as a winner
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>bid_id</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            

            

            <td class="description last">ID of bid to update</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="models_item_postgres.js.html">models/item/postgres.js</a>, <a href="models_item_postgres.js.html#line199">line 199</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    - Array with Rafflebay Bid Object and error (only one or the other)
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Array.&lt;{0: Bid, 1: String}></span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="~setupRepo"><span class="type-signature">(async, inner) </span>setupRepo<span class="signature">()</span><span class="type-signature"> &rarr; {string}</span></h4>
    

    



<div class="description">
    Uses createItemTableSQL and createBidTableSQL to create the tables, and logs the error.
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="models_item_postgres.js.html">models/item/postgres.js</a>, <a href="models_item_postgres.js.html#line71">line 71</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    - Return Null if the tables are created, and an error otherwise
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">string</span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="~updateItemStatus"><span class="type-signature">(async, inner) </span>updateItemStatus<span class="signature">(id, status)</span><span class="type-signature"> &rarr; {Array.&lt;{0: Item, 1: String}>}</span></h4>
    

    



<div class="description">
    Sets the item with the given id to the given status
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>id</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            

            

            <td class="description last">ID of item to update</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>status</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">Status to update item to</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="models_item_postgres.js.html">models/item/postgres.js</a>, <a href="models_item_postgres.js.html#line261">line 261</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    - Array with Rafflebay Item Object and error (only one or the other)
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Array.&lt;{0: Item, 1: String}></span>


    </dd>
</dl>

    





        
    

    

    
</article>

</section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="AuthService.html">AuthService</a></li><li><a href="ItemModel.html">ItemModel</a></li><li><a href="ItemRepo.html">ItemRepo</a></li><li><a href="RaffleService.html">RaffleService</a></li><li><a href="UserModel.html">UserModel</a></li><li><a href="UserRepo.html">UserRepo</a></li></ul><h3>Global</h3><ul><li><a href="global.html#PostgresDB">PostgresDB</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.3</a> on Thu Mar 05 2020 04:10:33 GMT+0000 (UTC)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>